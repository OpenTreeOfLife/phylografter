{{extend 'layout.html'}}

{{=plugin_treeGrafter(
    dict( treeId = request.args(0),
          menuInfo = dict( options = [ \
            dict( name = 'branchLength' ),
            dict( name = 'search' ),
            dict( name = 'treeSize' ),
            dict( name = 'graftOption' ) ] ),
          eventInfo = dict( nodeRightClick = dict( handler = 'showNodeContextMenu',
                                                   options = [ dict( handler = 'handleCollapseCladeOptionClick',
                                                                     test = 'doesNodeHaveChildren',
                                                                     text = 'Collapse Clade' ),
                                                               dict( handler = 'handleReplaceCladeOptionClick',
                                                                     test = 'canUserEditTree',
                                                                     text = 'Replace Clade' ),
                                                               dict( handler = 'handleGraftCladeOptionClick',
                                                                     test = 'canUserEditTree',
                                                                     text = 'Add Child' ),
                                                               dict( handler = 'handleAddToClipboardOptionClick',
                                                                     test = 'isUserLoggedIn',
                                                                     text = 'Add to Clipboard' ),
                                                               dict( handler = 'handlePruneCladeOptionClick',
                                                                     test = 'canUserEditTree',
                                                                     text = 'Prune Clade' ) ] ) ),
          viewInfo = dict( type = 'phylogram', mode = 'navigate' ) ) ) }}
